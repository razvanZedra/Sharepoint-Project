{"version":3,"file":"index.test.js","sourceRoot":"","sources":["../../src/test/index.test.ts"],"names":[],"mappings":"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","sourcesContent":["/// <reference types=\"mocha\" />\r\n\r\nimport { expect } from 'chai';\r\nimport {\r\n  detokenize,\r\n  loadTheme,\r\n  splitStyles,\r\n  loadStyles,\r\n  configureLoadStyles,\r\n  IThemingInstruction\r\n} from './../index';\r\n\r\ndescribe('detokenize', () => {\r\n  it('handles colors', () => {\r\n    expect(detokenize('\"[theme:name, default: #FFF]\"')).to.equal('#FFF');\r\n    expect(detokenize('\"[theme: name, default: #FFF]\"')).to.equal('#FFF');\r\n    expect(detokenize('\"[theme: name , default: #FFF  ]\"')).to.equal('#FFF');\r\n  });\r\n\r\n  it('handles rgba', () => {\r\n    expect(detokenize('\"[theme:name, default: rgba(255,255,255,.5)]\"')).to.equal('rgba(255,255,255,.5)');\r\n  });\r\n\r\n  it('handles fonts', () => {\r\n    expect(detokenize('\"[theme:name, default: \"Segoe UI\"]\"')).to.equal('\"Segoe UI\"');\r\n  });\r\n\r\n  it('respects theme', () => {\r\n    loadTheme({\r\n      color: 'red'\r\n    });\r\n\r\n    try {\r\n      expect(detokenize('\"[theme:color, default: #FFF]\"')).to.equal('red');\r\n      expect(detokenize('\"[theme: color , default: #FFF]\"')).to.equal('red');\r\n    } finally {\r\n      loadTheme(undefined);\r\n    }\r\n  });\r\n\r\n  it('ignores malformed themes', () => {\r\n    expect(detokenize('\"[theme:name, default: \"Segoe UI\"]')).to.equal('\"[theme:name, default: \"Segoe UI\"]');\r\n    expect(detokenize('\"[theme:]\"')).to.equal('\"[theme:]\"');\r\n  });\r\n\r\n  it('translates missing themes', () => {\r\n    expect(detokenize('\"[theme:name]\"')).to.equal('inherit');\r\n  });\r\n\r\n  it('splits non-themable CSS', () => {\r\n      const cssString: string = '.sampleClass\\n{\\n color: #FF0000;\\n}\\n';\r\n      const arr: IThemingInstruction[] = splitStyles(cssString);\r\n      expect(arr.length).to.equal(1);\r\n      expect(arr[0].rawString).to.equal(cssString);\r\n  });\r\n\r\n  it('splits themable CSS', () => {\r\n      const arr: IThemingInstruction[] = splitStyles('.firstClass { color: \"[theme: firstColor ]\";}\\n' +\r\n          ' .secondClass { color: \"[theme:secondColor, default: #AAA]\";}\\n .coach { color: #333; }');\r\n      expect(arr.length).to.equal(5);\r\n      for (let i: number = 0; i < arr.length; i++) {\r\n          if (i % 2 === 0) { // even index should be a string component\r\n              expect(typeof arr[i].rawString).to.equal('string');\r\n          } else { // odd index should be a theme instruction object\r\n              expect(typeof arr[i].theme).to.equal('string');\r\n          }\r\n      }\r\n  });\r\n\r\n  it('passes the styles to loadStyles override callback', () => {\r\n    const expected: string = 'xxx.foo { color: #FFF }xxx';\r\n    let subject: string | undefined = undefined;\r\n\r\n    const callback: (str: string) => void = (str: string) => {\r\n      subject = 'xxx' + str + 'xxx';\r\n    };\r\n\r\n    configureLoadStyles(callback);\r\n\r\n    loadStyles('.foo { color: \"[theme:fooColor, default: #FFF]\" }');\r\n    expect(subject).to.equal(expected);\r\n\r\n    configureLoadStyles(undefined);\r\n  });\r\n});\r\n"]}